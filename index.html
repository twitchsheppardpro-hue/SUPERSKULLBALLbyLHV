<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Skullball – V2</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900;1000&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./styles.css">
</head>
<body>
<header class="head">
  <div class="container head-grid">
    <div class="event">
      <img id="eventLogo" class="event-logo" src="./logos/logoevent.png" alt="Logo de l’évènement"/>
      <h1 id="leagueTitle" class="title">Ligue Hexa – V2</h1>
    </div>

    <nav id="mainNav" class="nav" aria-label="Navigation principale">
      <button class="pill" data-tab="classement" aria-controls="tab-classement">Classement</button>
      <button class="pill" data-tab="live" aria-controls="tab-live">Matchs en direct</button>
      <button class="pill" data-tab="finished" aria-controls="tab-finished">Matchs terminés</button>
    </nav>

    <button id="adminBtn" class="pill admin" title="Mode admin" aria-haspopup="true" aria-controls="tab-manage">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:8px" aria-hidden="true">
        <path d="M12 17a2 2 0 0 0 2-2V9a2 2 0 1 0-4 0v6a2 2 0 0 0 2 2z"/>
        <path d="M7 9V7a5 5 0 1 1 10 0v2"/>
        <rect x="5" y="9" width="14" height="10" rx="2"/>
      </svg>
      Admin
    </button>
  </div>
</header>

<main class="container">
  <!-- CLASSEMENT -->
  <section id="tab-classement" class="panel" role="tabpanel" aria-labelledby="tab-btn-classement">
    <div class="caption">Tri : Points ▸ Diff ▸ BO ▸ BD ▸ Confrontation directe.</div>

    <div class="subnav" role="tablist" aria-label="Sous-onglets classement">
      <button class="pill sub" data-sub="tableau" aria-controls="view-tableau">Classement</button>
      <button class="pill sub" data-sub="bracket" aria-controls="view-bracket">Phase finale</button>
      <button class="pill sub" data-sub="buteurs" aria-controls="view-buteurs">Buteurs</button>
    </div>

    <div id="view-tableau">
      <table class="table">
        <thead>
          <tr>
            <th class="pos">#</th>
            <th>Équipe</th>
            <th>J</th><th>G</th><th>N</th><th>P</th>
            <th>BP</th><th>BC</th><th>Diff</th>
            <th>BO</th><th>BD</th><th>Pts</th>
          </tr>
        </thead>
        <tbody id="standings"></tbody>
      </table>
    </div>

    <div id="view-bracket" hidden>
      <div class="bracket-grid" id="bracket-grid">
        <div class="bucket" id="bucket-barrages">
          <h3>Barrages</h3>
          <div id="barrages" class="br-list"></div>
        </div>
        <div class="bucket" id="bucket-demis">
          <h3>Demi-finales</h3>
          <div id="demis" class="br-list"></div>
        </div>
        <div class="bucket" id="bucket-finale">
          <h3>Finale</h3>
          <div id="finale" class="br-list"></div>
        </div>
      </div>
      <div class="small" style="margin-top:8px">
        Clique une équipe pour la désigner vainqueur (1–0). Les vainqueurs se propagent automatiquement. Données enregistrées en local.
      </div>
    </div>

    <div id="view-buteurs" hidden>
      <table class="table">
        <thead>
          <tr><th class="pos">#</th><th>Joueur</th><th>Club</th><th>Buts</th></tr>
        </thead>
        <tbody id="scorers"></tbody>
      </table>
    </div>
  </section>

  <!-- LIVE -->
  <section id="tab-live" class="panel" hidden role="tabpanel" aria-labelledby="tab-btn-live">
    <div class="rr" id="rr-wrapper">
      <div id="rr-list"></div>
    </div>

    <div class="live-match-controls admin-only">
      <div class="admin-only-match-card">
        <!-- Équipe A -->
        <div class="team-side left-side">
          <div class="team-info">
            <img id="aLogo" class="logo" src="" alt="Logo équipe A">
            <div class="name" id="aName">—</div>
          </div>
          <div class="player-controls">
            <div class="player-buttons" id="aPlayers"></div>
            <div class="player-actions">
              <button id="aMoins" aria-label="Retirer le dernier but pour l'équipe A">−</button>
              <button id="aForfait" class="forfait" aria-label="Déclarer forfait équipe A">F</button>
            </div>
          </div>
        </div>

        <!-- Centre -->
        <div class="center-controls">
          <div class="match-status-badge">
            <span id="matchStatus" class="status">À VENIR</span>
          </div>
          <div class="match-score" aria-live="polite">
            <span id="as">0</span> – <span id="bs">0</span>
          </div>
          <div class="match-time-info">
            <span id="matchType" class="badge">Journée X</span>
            <span id="timer" class="timer">15:00</span>
          </div>
          <div class="match-controls" role="group" aria-label="Contrôles du match">
            <button id="play" aria-label="Démarrer le chrono">▶</button>
            <button id="pause" aria-label="Mettre le chrono en pause">⏸</button>
            <button id="reset" aria-label="Réinitialiser le chrono">↺</button>
          </div>
          <button id="finish" class="finish-match-btn primary" aria-label="Clore le match">Match terminé</button>
        </div>

        <!-- Équipe B -->
        <div class="team-side right-side">
          <div class="team-info">
            <div class="name" id="bName">—</div>
            <img id="bLogo" class="logo" src="" alt="Logo équipe B">
          </div>
          <div class="player-controls">
            <div class="player-buttons" id="bPlayers"></div>
            <div class="player-actions">
              <button id="bMoins" aria-label="Retirer le dernier but pour l'équipe B">−</button>
              <button id="bForfait" class="forfait" aria-label="Déclarer forfait équipe B">F</button>
            </div>
          </div>
        </div>
      </div> <!-- /.admin-only-match-card -->
    </div> <!-- /.live-match-controls -->
  </section>

  <!-- FINISHED -->
  <section id="tab-finished" class="panel" hidden role="tabpanel" aria-labelledby="tab-btn-finished">
    <div class="subnav" id="finished-filters" aria-label="Filtres des matchs terminés"></div>
    <div id="finished" class="list"></div>
  </section>

  <!-- ADMIN / GESTION -->
  <section id="tab-manage" class="panel admin-only" hidden role="region" aria-label="Administration">
    <h3>Gestion</h3>
    <p class="small">Options du tournoi et outils d'administration.</p>

    <div class="manage-section">
      <h4>Règles de points</h4>
      <div class="form-group">
        <label for="winPts">Victoire:</label>
        <input type="number" id="winPts" value="3" min="0">
      </div>
      <div class="form-group">
        <label for="drawPts">Nul:</label>
        <input type="number" id="drawPts" value="1" min="0">
      </div>
      <div class="form-group">
        <label for="lossPts">Défaite:</label>
        <input type="number" id="lossPts" value="0" min="0">
      </div>
    </div>

    <div class="manage-section">
      <h4>Bonus</h4>
      <div class="form-group toggle-switch">
        <input type="checkbox" id="enableBonus">
        <label for="enableBonus">Activer les bonus</label>
      </div>
      <div id="bonusSettings" class="hidden" aria-live="polite">
        <div class="form-group">
          <label for="boThreshold">Bonus Offensif (écart ≥ X):</label>
          <input type="number" id="boThreshold" value="3" min="1">
        </div>
        <div class="form-group">
          <label for="bdThreshold">Bonus Défensif (défaite par ≤ X):</label>
          <input type="number" id="bdThreshold" value="1" min="0">
        </div>
      </div>
    </div>

    <div class="manage-section">
      <h4>Matchs</h4>
      <div class="form-group">
        <label for="matchDuration">Durée du match (minutes):</label>
        <input type="number" id="matchDuration" value="15" min="1">
      </div>
      <div class="form-group">
        <label for="forfeitScore">Score forfait (perte):</label>
        <input type="number" id="forfeitScore" value="3" min="0">
      </div>
    </div>

    <div class="manage-section">
      <h4>Outils</h4>
      <button id="generateSchedule" class="button">Générer le calendrier</button>
      <button id="generateBracket" class="button">Générer les phases finales</button>
      <button id="wipe" class="primary button danger">Ré-initialiser les données</button>
    </div>
  </section>
</main>

<script src="./app.js"></script>
</body>
</html>
